---
date: 2018-08-06 21:27
status: public
title: 2018-08-06Scrapy爬虫笔记1-Scrapy
---

## 定义
* 所谓爬虫是指网络爬虫，能够在互联网上自动爬取网站内容信息的程序，也被称为网络蜘蛛或网络机器人。大型的爬虫程序广泛用于搜索引擎、数据挖掘等领域。

## 爬虫的工作流程
1、下载页面
* 一个网页的内容本质上就是一个HTML文本，爬取一个网页内容之前，首先要根据网页的URL下载页面。

2、提取页面中的数据
* 当一个页面（HTML）下载完成后，对页面的内容进行分析，并提取对我们有用的数据，提取到的数据可以以多种形式保存其起来，比如将数据以某种格式（CSV、JSON）写入文件中、或存储到数据库（MySql、MongoDB）中。

3、提取页面的链接
* 通常我们爬取网站内容，不可能只爬取一个页面，而是有许多分类页面中。这些页面彼此有关联，一个页面中可能包含多个页面的连接，提取某个页面中的链接后，还要把页面的某些链接也要提取出来。
* 设计爬虫程序时，要考虑防止重复爬取相同页面（URL去重），页面搜索策略（深度优先或广度优先）、爬虫访问边界等问题
* 用纯python开发一个爬虫程序是一项巨大且繁琐的工作，为了避免制造轮子而消耗大量的时间。我们通常会选择一些优秀的爬虫框架来降低开发成本，提高程序质量，而开源的爬虫框架Scrapy是目录最流行。

## 爬虫的安装
```shell
pip install scrapy
import scrapy
scrapy.version_info
```
## 编写第一个爬虫
### 创建项目
* 项目需求，爬取京东商城关于Python书籍的商品信息。

```python
#创建第一个爬虫项目
scrapy startproject demo1
#进入项目
cd demo1
#查看项目目录文件
tree demo1
```

### 分析页面
    在编写爬虫页面之前，首先需要对爬取的页面进行分析，主流的浏览器都有分析页面的工具或插件。推荐使用Chrome（谷歌）浏览器。打开谷歌浏览器，按F12或右键选择审查进入开发者工具模式。关于python书籍商品的网页链接：https://search.jd.com/Search?keyword=python&enc=utf-8&wq=python&pvid=1a0ac0331e1344f28f13ca45d3eab6a7
    
### 数据信息
    通过F2元素审查，可以看到书籍列表在id为J_goodsList的div中，由li元素包裹每本书籍的商品的信息。在每个li元素中，class为p-img的div包含书籍的图片信息，class为p-price的div包含了书籍的价格，class为p-name的div包含了书籍的名称，class为p-commit的div包含了书籍的评论数量.
    
### 代码爬虫的实现
